{% extends "../base.html" %} 
{% load static %} 

{% block titulo %}Anúncios de Veículos{% endblock %} 

{% block css_local %}
<style>
  .card-anuncio {
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  }
  .card-anuncio:hover {
    transform: translateY(-5px);
    box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
  }
  .card-img-top {
    height: 200px;
    object-fit: cover;
  }
  .card-valor {
    font-size: 1.75rem;
    font-weight: 700;
    color: #28a745;
  }
  .card-usuario {
    font-size: 0.9rem;
    color: #6c757d;
  }
</style>
{% endblock %} 

{% block conteudo %}
<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="fw-bold">Anúncios Disponíveis</h2>
      <p class="text-muted">Confira os veículos anunciados em nossa plataforma.</p>
    </div>
    <div>
      <a href="{% url 'meus-anuncios' %}" class="btn btn-outline-primary">
        <i class="fas fa-user-tag me-2"></i>Meus Anúncios
      </a>
      <a href="{% url 'criar-anuncio' %}" class="btn btn-primary">
        <i class="fas fa-plus-circle me-2"></i>Criar Novo Anúncio
      </a>
    </div>
  </div>

  {% if anuncios %}
  <div class="row g-4">
    {% for anuncio in anuncios %}
    <div class="col-lg-4 col-md-6">
      <div class="card h-100 shadow-sm card-anuncio">
        <img
          src="{% if anuncio.veiculo.foto %}{{ anuncio.veiculo.foto.url }}{% else %}{% static 'img/sem_foto.jpg' %}{% endif %}"
          class="card-img-top"
          alt="Foto de {{ anuncio.veiculo.modelo }}"
        />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title fw-bold">{{ anuncio.veiculo.get_marca_display }} {{ anuncio.veiculo.modelo }}</h5>
          <p class="card-text text-muted flex-grow-1">{{ anuncio.descricao|truncatewords:15 }}</p>
          <div class="mt-auto">
            <p class="card-valor mb-2">R$ {{ anuncio.valor|floatformat:2 }}</p>
            <div class="d-flex justify-content-between align-items-center">
                <span class="badge bg-secondary">{{ anuncio.veiculo.ano }}</span>
                <span class="badge bg-info text-dark">{{ anuncio.veiculo.get_combustivel_display }}</span>
            </div>
          </div>
        </div>
        <div class="card-footer bg-transparent border-top-0">
            <small class="text-muted card-usuario">
                <i class="fas fa-user me-1"></i> Anunciado por: {{ anuncio.usuario.get_full_name|default:anuncio.usuario.username }}
            </small>
            <small class="text-muted float-end">
                <i class="fas fa-calendar-alt me-1"></i> {{ anuncio.data_criacao|date:"d/m/Y" }}
            </small>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="text-center py-5">
    <i class="fas fa-bullhorn fa-3x text-muted mb-3"></i>
    <h4 class="text-muted">Nenhum anúncio encontrado.</h4>
    <p class="text-muted">Ainda não há anúncios disponíveis. Que tal criar o primeiro?</p>
    <a href="{% url 'criar-anuncio' %}" class="btn btn-primary mt-3">
      <i class="fas fa-plus-circle me-2"></i>Criar Anúncio
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}
